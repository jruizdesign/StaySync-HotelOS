# 1. ADMIN QUERY
query AdminListProperties @auth(level: USER) {
  properties {
    id
    name
    address
    email
  }
}

# 2. DASHBOARD QUERY
query GetPropertyDashboard($propertyId: UUID!) @auth(level: USER) {
  
  property(id: $propertyId) {
    id
    name
    address
  }

  bookings(
    where: { 
      propertyId: { eq: $propertyId } 
    }
    orderBy: { checkInDate: ASC }
  ) {
    id
    guestName
    status
    checkInDate
    checkOutDate
    room {
      roomNumber
    }
  }

  rooms(
    where: { 
      propertyId: { eq: $propertyId } 
    }
    orderBy: { roomNumber: ASC }
  ) {
    id
    roomNumber
    roomType
    floor
    status
    pricePerNight
  }

  users(
    where: {
      propertyId: { eq: $propertyId }
    }
  ) {
    id
    email
    role
    name
    pin
    status
  }
}

# 3. MUTATIONS
mutation CreateBooking(
  $propertyId: UUID!, 
  $guestName: String!, 
  $checkIn: Date!, 
  $checkOut: Date!
) @auth(level: USER) {
  booking_insert(data: {
    propertyId: $propertyId,
    guestName: $guestName,
    checkInDate: $checkIn,
    checkOutDate: $checkOut,
    status: "CONFIRMED"
  })
}

# ... (Keep your existing queries) ...

# 4. MUTATION: Update Property Settings
mutation UpdateProperty(
  $id: UUID!,
  $name: String,
  $address: String,
  $email: String,
  $phoneNumber: String
) @auth(level: USER) {
  property_update(
    key: { id: $id },
    data: {
      name: $name,
      address: $address,
      email: $email,
      phoneNumber: $phoneNumber
    }
  )
}

mutation UpdateUserStatus(
  $id: String!,
  $status: String!
) @auth(level: USER) {
  user_update(
    id: $id,
    data: {
      status: $status
    }
  )
}

# MUTATION: Update Room Status & Details
mutation UpdateRoom(
  $id: UUID!,
  $status: String,
  $type: String,
  $floor: Int,
  $number: String
) @auth(level: USER) {
  room_update(
    key: { id: $id },
    data: {
      status: $status,
      roomType: $type,
      floor: $floor,
      roomNumber: $number
    }
  )
}

mutation CreateRoom(
  $propertyId: UUID!,
  $roomNumber: String!,
  $roomType: String!,
  $floor: Int,
  $pricePerNight: Float,
  $status: String
) @auth(level: USER) {
  room_insert(data: {
    propertyId: $propertyId,
    roomNumber: $roomNumber,
    roomType: $roomType,
    floor: $floor,
    pricePerNight: $pricePerNight,
    status: $status
  })
}

# ... (Keep your existing queries) ...



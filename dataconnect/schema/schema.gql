
# 1. Properties
type Property @table(name: "properties") {
  id: UUID! @default(expr: "uuidV4()")
  name: String!
  address: String
  phoneNumber: String
  email: String
  users: [User!]! @relation(name: "property_users")
  bookings: [Booking!]! @relation(name: "property_bookings")
  rooms: [Room!]! @relation(name: "property_rooms")
}

# 2. Users
type User @table(name: "users") {
  id: String! @col(name: "uid") 
  email: String!
  role: String! 
  
  # The Foreign Key (Actual Data)
  propertyId: UUID
  
  # The Link (Data Connect infers this links to Property via propertyId)
  property: Property @relation(name: "property_users")
}

# 3. Bookings
type Booking @table(name: "bookings") {
  id: UUID! @default(expr: "uuidV4()")
  guestName: String!
  checkInDate: Date!
  checkOutDate: Date!
  status: String!
  
  # The Foreign Key
  propertyId: UUID!
  # The Link
  property: Property! @relation(name: "property_bookings")
  
  # Link to Room
  roomId: UUID
  room: Room
}

# 4. Rooms
type Room @table(name: "rooms") {
  id: UUID! @default(expr: "uuidV4()")
  roomNumber: String!
  status: String # Status like Clean, Dirty, Occupied
  roomType: String!
  capacity: Int
  pricePerNight: Float
  
  # The Foreign Key
  propertyId: UUID!
  # The Link
  property: Property! @relation(name: "property_rooms")
}